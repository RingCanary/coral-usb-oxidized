# WORKLOG

Concise event wise / epoch wise logs of activities, marked by epoch timestamp ( `date +%s` )


## 2026-03-01
- [epoch:1772342379] Revist by user, and some cleanup, verbose logs marked archive and moved to `docs/`
- [epoch:1772344130] Pi5 tmux run: added interposer payload dump mode (`LIBUSB_TRACE_DUMP_DIR/LENS`), captured full good/replay `2608`+`9872` submit payloads; byte deltas are sparse and structured (2608: 6 bytes at `74-76,88-90`; 9872: 13 bytes at `232-234,249-252,7672-7674,7690-7692`), with replay side zeros at these fields.
- [epoch:1772345128] Added instruction patch-injection path to replay (`--instruction-patch-spec`) with per-chunk hash telemetry (FNV), wired across all instruction send paths (bootstrap/preload/run/interleave); added `tools/build_instruction_patch_spec.py` to derive patch specs from good-vs-replay payload dumps.
- [epoch:1772346214] Derived concrete patch bytes (19 total) for len `2608` and `9872` from Pi5 dumps; wrote reusable spec at `docs/replay_instruction_patch_spec_2026-03-01.txt`.
- [epoch:1772347007] Pi5 reboot-first A/B with firmware upload (using rsync-synced patch spec): both unpatched and patched reached the same class-2 wall at offset 49152 (chunk 48 timeout); patched path confirmed active (2 instruction patch telemetry lines), so byte patching alone does not bypass admission wall.
- [epoch:1772355000] Executed #2-#6 campaign on Pi5 and wrote consolidated report `docs/usb_re_strategy_2_to_6_2026-03-01.md`: (a) URB metadata diff shows large submit/reap/discard churn delta, (b) reboot-first async parity (`local` vs `global lanes`) still fails at 49152, (c) deterministic fault signatures captured at ~33024 and ~49KiB with poison probes timing out bridge+SCU reads, (d) header grammar mined across 15 logs confirms stable `(len,tag)` structure, (e) descriptor parity verified DFU boot mode vs 6-endpoint runtime mode.
- [epoch:1772357397] Breakthrough: added `--bootstrap-known-good-order` to `examples/rusb_serialized_exec_replay.rs` and validated on Pi5 reboot-first A/B. Baseline order (`9872 -> 2608 -> 4194304`) fails at first 1MiB chunk (`actual=49152`), while reordered path (`2608 -> 4194304 -> 9872 -> 2048`) succeeds end-to-end with repeatable output hash (`0x3ce2a859ce7ed025`). usbmon capture confirms reordered header sequence on wire.
- [epoch:1772362197] Dimension-field RE expansion: compiled new dense templates (`1152,1280,1408,1536,1664,1792,1920`) via Rust toolchain wrapper; discovered additional same-size instruction families (`1536<->2304`, `1792<->2688`) and ran 3-pair stable-offset analysis with new tool `tools/instruction_dim_field_analysis.py`. Results: EO diff counts `446/389/435`, PC `154/187/202`, stable intersections `EO=114` and `PC=78` non-relocation offsets; report at `docs/instruction_dim_field_analysis_2026-03-01.md` with machine-readable artifacts in `docs/artifacts/instruction-dim-field-20260301/`.
- [epoch:1772362395] Extended STAND_ALONE sweep (`3328,3584,3840` plus fresh `3072,4096`) shows mixed families: `3072/4096 -> EO=11152`, `3328 -> 9616`, `3584 -> 10128`, `3840 -> 10640`. Updated size table in `docs/artifacts/instruction-dim-field-20260301/dense_instruction_size_table.tsv`; confirms family transitions across nearby dimensions and reinforces family-scoped synthesis approach.
- [epoch:1772362531] Added low-dimension probes (`640,768,896`) and found repeated EO/PC families across scales: `640/1280 -> 7056/1840`, `768/1536/2304 -> 7952/2096`, `896/1792/2688 -> 8976/2352`, `1024/2048 -> 9872/2608`. This gives multiple 3-point families for stronger offset-formula fitting in the next synthesis step.
- [epoch:1772362577] Cross-family EO/PC analysis (10 dimensions) generated with default same-size pairing using `tools/instruction_dim_field_analysis.py`; strongest stable fields now validated across all families (not just 3-pair set), notably EO offsets `338` and `340` with near-perfect monotonic correlation to dimension/tile count. Stored outputs at `docs/artifacts/instruction-dim-field-20260301/*crossfamily*`.
- [epoch:1772363526] Added synthesis prototype `tools/synthesize_instruction_patch_spec.py` and generated family patch set (`768/2304 -> target 1536`) with `191` predicted instruction-byte mutations (`EO=94`, `PC=97`) vs true target bytes. DUT validation on Pi5+Coral (`/tmp/dense-1536/dense_1536x1536_quant_edgetpu.tflite`, `--bootstrap-known-good-order`): baseline passes (`fnv=0xdc8c52f84cb2e9c0`), full synth patch fails class-2 at offset `0`; split tests show `PC-only` patch reproduces class-2 wall immediately, while `EO-only` patch reaches completion event then fails on output read timeout. This isolates preload-admission sensitivity to PARAMETER_CACHING instruction semantics.
- [epoch:1772363896] Re-ran full synth on Pi5 reboot-first with explicit firmware path (`/home/rpc/coral-usb-oxidized-lab/apex_latest_single_ep.bin`) to capture clean failure signature: full synth (`EO+PC`) fails at class-2 offset `0`; `PC-only` fails class-2 offset `0`; `EO-only` passes preload/event but times out on output read. Added DUT log bundle under `docs/artifacts/instruction-synthesis-20260301/pi5-logs/` and concise summary `docs/artifacts/instruction-synthesis-20260301/pi5_dut_summary.md`.
- [epoch:1772365342] Replaced endpoint-only interpolation in `tools/synthesize_instruction_patch_spec.py` with formula-gated synthesis: multi-point `--fit-point` support, model families (`const/tile-linear/tile-quadratic/tile2div-linear`), `changed-fit-union` offset mode, strict LOO+endpoint-consistency gate (defaults: exact=1.0, mae=0.0), and optional target-less/base-only operation. Added local hold-out artifact for target 2048 with zero mismatches at `docs/artifacts/instruction-synthesis-formula-20260301/holdout_target2048.*`.
- [epoch:1772366263] Added word/halfword RE tool `tools/instruction_word_field_analysis.py` and ran stride-64 family analyses for PC(2096) and EO(7952) on dims 768/1536/2304. Confirmed repeated record residues and recovered exact multi-byte tile-domain fields, including `u16@residue34` sequence `65345,64769,63809` with exact fit `65537 - 4*floor((tiles^2)/3)` (equiv quadratic). Artifacts under `docs/artifacts/instruction-word-field-20260301/`; summary doc `docs/instruction_word_field_analysis_2026-03-01.md`.
